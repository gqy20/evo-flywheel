# Evo-Flywheel 开发路线图

> 项目周期: 2-3周
> 目标: 完成可演示的 MVP
> 更新日期: 2025-12-28

---

## 阶段概览

| 阶段 | 名称 | 工期 | 优先级 |
|------|------|------|--------|
| Phase 0 | 项目初始化 | 0.5天 | P0 |
| Phase 1 | 数据层构建 | 2天 | P0 |
| Phase 2 | 采集层开发 | 2天 | P0 |
| Phase 3 | 分析层实现 | 2天 | P0 |
| Phase 4 | 搜索层集成 | 1.5天 | P0 |
| Phase 5 | 展示层开发 | 3天 | P0 |
| Phase 6 | 测试与优化 | 2天 | P1 |

---

## Phase 0: 项目初始化 (0.5天)

### 目标
搭建项目基础结构，配置开发环境

### 任务清单

| 任务 | 说明 |
|------|------|
| 目录结构创建 | 创建 src/, tests/, docs/, config/ 等目录 |
| 依赖管理 | 创建 requirements.txt，定义所有依赖包 |
| 配置文件 | 创建 config.yaml，集中管理配置 |
| 环境变量 | 创建 .env.example 模板 |
| 日志配置 | 设置统一的日志格式和输出 |

### 验收标准

- [ ] 项目目录结构完整
- [ ] `pip install -r requirements.txt` 成功无报错
- [ ] 配置文件可正常加载
- [ ] 日志系统可正常输出

---

## Phase 1: 数据层构建 (2天)

### 目标
搭建双数据库架构（SQLite + Chroma）

### 任务清单

| 任务 | 说明 |
|------|------|
| SQLite Schema 设计 | 实现数据库表结构和索引 |
| 数据库初始化脚本 | 创建表、索引、初始数据 |
| Chroma 集成 | 配置向量数据库连接 |
| 数据模型定义 | 定义 Python 数据模型类 |
| CRUD 基础操作 | 实现增删改查基础函数 |

### 验收标准

- [ ] 数据库表创建成功，结构符合 PRD
- [ ] 可以成功插入和查询论文数据
- [ ] Chroma collection 创建成功
- [ ] 单元测试覆盖率 > 60%

---

## Phase 2: 采集层开发 (2天)

### 目标
实现多源文献自动采集

### 任务清单

| 任务 | 说明 |
|------|------|
| RSS 采集器 | 实现 feedparser 解析逻辑 |
| bioRxiv API 集成 | 实现官方 API 调用 |
| 数据去重 | 基于 DOI/标题的去重逻辑 |
| 元数据提取 | 统一各源数据格式 |
| 定时任务配置 | APScheduler 配置每日采集 |
| 错误处理 | 单源失败不影响其他源 |

### 验收标准

- [ ] 8个数据源全部正常采集
- [ ] 去重准确率 > 99%
- [ ] 单次采集耗时 < 2分钟
- [ ] 采集失败有完整日志

---

## Phase 3: 分析层实现 (2天)

### 目标
实现 LLM 智能分析服务

### 任务清单

| 任务 | 说明 |
|------|------|
| Prompt 模板 | 定义进化生物学分析 Prompt |
| LLM 服务封装 | 封装 OpenAI API 调用 |
| 结构化解析 | 解析 LLM 返回的 JSON |
| 批量处理 | 支持批量分析，控制并发 |
| 成本控制 | 添加 Token 统计和成本估算 |
| 缓存机制 | 避免重复分析同一论文 |

### 验收标准

- [ ] 单篇分析耗时 < 10秒
- [ ] LLM 返回结果可正确解析
- [ ] 关键发现提取准确率 > 70%
- [ ] 单篇分析成本 < $0.1
- [ ] 批量分析 30 篇耗时 < 5分钟

---

## Phase 4: 搜索层集成 (1.5天)

### 目标
实现语义搜索和向量检索

### 任务清单

| 任务 | 说明 |
|------|------|
| Embedding 服务 | 集成 sentence-transformers |
| 向量生成 | 为论文摘要生成向量 |
| Chroma 存储 | 将向量存入 Chroma |
| 语义搜索 API | 实现相似度查询接口 |
| 混合搜索 | SQLite 过滤 + Chroma 排序 |
| 向量重建 | 支持重建向量索引 |

### 验收标准

- [ ] Embedding 生成成功，384维向量
- [ ] 语义搜索响应 < 1秒
- [ ] 支持中英文查询
- [ ] Top5 结果相关度 > 80%
- [ ] 混合搜索功能正常

---

## Phase 5: 展示层开发 (3天)

### 目标
实现 Streamlit Web 界面

### 任务清单

| 任务 | 说明 |
|------|------|
| 首页 | 今日报告概览、重点推荐 |
| 文献列表页 | 可筛选、搜索、分页 |
| 论文详情页 | 完整信息展示 |
| 语义搜索页 | 自然语言搜索界面 |
| 相似论文推荐 | 每篇论文显示相关研究 |
| 反馈组件 | 评分、评论功能 |
| 报告生成页 | 手动生成历史报告 |

### 验收标准

- [ ] 页面加载时间 < 3秒
- [ ] 所有核心功能可访问
- [ ] 响应式设计，适配移动端
- [ ] 用户交互流畅无卡顿
- [ ] 反馈数据正常保存

---

## Phase 6: 测试与优化 (2天)

### 目标
保证系统质量，优化性能

### 任务清单

| 任务 | 说明 |
|------|------|
| 单元测试 | 核心逻辑测试覆盖 |
| 集成测试 | 端到端流程测试 |
| 压力测试 | 模拟 100+ 论文场景 |
| 性能优化 | 数据库查询、API 响应优化 |
| 错误修复 | 修复所有 P0/P1 Bug |
| 部署准备 | Docker 化（可选） |

### 验收标准

- [ ] 单元测试覆盖率 > 50%
- [ ] 无 P0 级 Bug
- [ ] P1 级 Bug < 3个
- [ ] 采集、分析、报告全流程打通
- [ ] API 文档完整

---

## 总体验收标准

### 功能完整性

- [ ] 8个数据源正常采集
- [ ] LLM 分析功能可用
- [ ] 语义搜索功能正常
- [ ] 每日报告按时生成
- [ ] Web 界面可访问

### 质量标准

- [ ] 单元测试覆盖率 > 50%
- [ ] 无 P0 级 Bug
- [ ] API 文档完整
- [ ] 代码注释完整

### 性能标准

- [ ] 采集耗时 < 2分钟
- [ ] 单篇分析 < 10秒
- [ ] 报告生成 < 30秒
- [ ] 语义搜索 < 1秒
- [ ] 页面加载 < 3秒

---

## 依赖关系

```
Phase 0 (初始化)
    ↓
Phase 1 (数据层) ←─────┐
    ↓                  │
Phase 2 (采集层)        │
    ↓                  │
Phase 3 (分析层)        │
    ↓                  │
Phase 4 (搜索层)        │
    ↓                  │
Phase 5 (展示层) ───────┘
    ↓
Phase 6 (测试与优化)
```

---

## 风险与应对

| 风险 | 影响 | 应对 |
|------|------|------|
| RSS 源不稳定 | 中 | 多源备份、容错处理 |
| LLM 成本超预算 | 中 | 使用 mini 模型、缓存 |
| Chroma 性能问题 | 低 | 调整索引参数、分片 |
| 开发进度延期 | 中 | 砍掉非核心功能 |

---

**文档版本**: v1.0
